<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Buscador de Jurisprudencia</title>
  <!-- Flatpickr CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
  />
  <!-- Tom Select CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.default.min.css"
  />

  <link rel="stylesheet" href="../static/css/style.css">
</head>
<body>
  <!-- Loader overlay -->
  <div id="loader" class="loader-overlay" style="display:none;">
    <div class="loader-content">
      <div class="spinner"></div>
      <p>Procesando datos…</p>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <h1>Buscador de Jurisprudencia</h1>

      <form id="search-form"
      action="{{ url_for('search') }}"
      method="post"
      target="_blank"> 
        <!-- 1) Salas disponibles -->
        <div class="field">
          <label for="sala-select">Salas Disponibles</label>
          <select
            id="sala-select"
            name="salas[]"
            multiple
            placeholder="Seleccione sala(s)…"
          >
            <optgroup label="Civil, Familia y Agraria">
              <option value="SALA DE CASACIÓN CIVIL">SALA DE CASACIÓN CIVIL</option>
            </optgroup>
            <optgroup label="Laboral">
              <option value="SALA DE DESCONGESTIÓN LABORAL N.º 1">SALA DE DESCONGESTIÓN LABORAL N.º 1</option>
              <option value="SALA DE DESCONGESTIÓN LABORAL N.º 2">SALA DE DESCONGESTIÓN LABORAL N.º 2</option>
              <option value="SALA DE DESCONGESTIÓN LABORAL N.º 3">SALA DE DESCONGESTIÓN LABORAL N.º 3</option>
              <option value="SALA DE DESCONGESTIÓN LABORAL N.º 4">SALA DE DESCONGESTIÓN LABORAL N.º 4</option>
              <option value="SALA DE CASACIÓN LABORAL">SALA DE CASACIÓN LABORAL</option>
            </optgroup>
            <optgroup label="Penal">
              <option value="Sala Especial de Primera Instancia">Sala Especial de Primera Instancia</option>
              <option value="Sala Especial de Instrucción">Sala Especial de Instrucción</option>
              <option value="Sala de Casación Penal">Sala de Casación Penal</option>
            </optgroup>
            <optgroup label="Plena">
              <option value="SALA PLENA">SALA PLENA</option>
            </optgroup>
          </select>
        </div>

        <!-- 2) Ámbito temático -->
        <div class="field">
          <label>Ámbito Temático</label>
          <label><input type="checkbox" name="ambito[]" value="CONSTITUCIONAL" /> Constitucional</label>
          <label><input type="checkbox" name="ambito[]" value="NEGOCIOS_GENERALES" /> Negocios Generales</label>
        </div>

        <!-- 3+4) Tipo de asunto & Publicación -->
        <div class="grid">
          <div class="field">
            <label>Tipo de Asunto</label>
            <label><input type="radio" name="asunto" value="ASUNTOS DE SALA" /> Asuntos de Sala</label>
            <label><input type="radio" name="asunto" value="TUTELA" /> Tutelas</label>
            <label><input type="radio" name="asunto" value="TODO" checked /> Todos</label>
          </div>
          <div class="field">
            <label>Publicación</label>
            <label><input type="radio" name="publicacion" value="RELEVANTE" /> Relevantes</label>
            <label><input type="radio" name="publicacion" value="PUBLICADA" /> Gaceta Judicial</label>
            <label><input type="radio" name="publicacion" value="" checked /> Todas</label>
          </div>
        </div>

        <!-- 5) Rango de fechas -->
        <div class="grid">
          <div class="field">
            <label for="start-date">Fecha desde</label>
            <input type="text" id="start-date" name="start_date" required />
          </div>
          <div class="field">
            <label for="end-date">Fecha hasta</label>
            <input type="text" id="end-date" name="end_date" required />
          </div>
        </div>

        <!-- 6) Tipo de Providencia -->
        <div class="field">
          <label for="providencia-select">Tipo de Providencia</label>
          <select
            id="providencia-select"
            name="providencia[]"
            multiple
            placeholder="Seleccione…"
          >
            <option value="AUTO">AUTO</option>
            <option value="AUTO INTERLOCUTORIO">AUTO INTERLOCUTORIO</option>
            <option value="AUTO SUSTANCIACIÓN">AUTO SUSTANCIACIÓN</option>
            <option value="CONCEPTO">CONCEPTO</option>
            <option value="MIXTA">MIXTA</option>
            <option value="OTROS">OTROS</option>
            <option value="PUBLICACIÓN ESPECIALIZADA">PUBLICACIÓN ESPECIALIZADA</option>
            <option value="SENTENCIA">SENTENCIA</option>
            <option value="SENTENCIA COMPLEMENTARIA">SENTENCIA COMPLEMENTARIA</option>
            <option value="SENTENCIA DE INSTANCIA">SENTENCIA DE INSTANCIA</option>
            <option value="SENTENCIA SUSTITUTIVA">SENTENCIA SUSTITUTIVA</option>
          </select>
        </div>

        <button type="submit">Buscar</button>
      </form>
    </div>
  </div>

  <!-- JS libs -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Flatpickr
      flatpickr('#start-date', { dateFormat: 'd/m/Y' });
      flatpickr('#end-date',   { dateFormat: 'd/m/Y' });

      // Tom Select para sala (multi, expande a la derecha)
      new TomSelect('#sala-select', {
        plugins: ['remove_button'],
        maxItems: null,
        dropdownClass: 'ts-dropdown expand-right',
        placeholder: 'Seleccione sala(s)…'
      });

      // Tom Select para providencia
      new TomSelect('#providencia-select', {
        plugins: ['remove_button'],
        maxItems: null,
        placeholder: 'Seleccione…'
      });
    });
  </script>
</body>
</html>
